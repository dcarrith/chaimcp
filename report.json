{"created": 1770556219.5676281, "duration": 113.70779228210449, "exitcode": 1, "root": "/Users/dcarrith/Repositories/mcpch.ai", "environment": {}, "summary": {"passed": 34, "failed": 12, "total": 46, "collected": 46}, "collectors": [{"nodeid": "", "outcome": "passed", "result": [{"nodeid": "tests", "type": "Dir"}]}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient", "outcome": "passed", "result": [{"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_get_connection_error", "type": "TestCaseFunction", "lineno": 72}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_get_generic_exception", "type": "TestCaseFunction", "lineno": 81}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_get_success", "type": "TestCaseFunction", "lineno": 52}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_init_datalayer", "type": "TestCaseFunction", "lineno": 31}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_init_defaults", "type": "TestCaseFunction", "lineno": 21}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_init_explicit_port", "type": "TestCaseFunction", "lineno": 45}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_init_unknown_service", "type": "TestCaseFunction", "lineno": 38}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_wrappers", "type": "TestCaseFunction", "lineno": 90}]}, {"nodeid": "tests/test_chia_client.py", "outcome": "passed", "result": [{"nodeid": "tests/test_chia_client.py::TestChiaRpcClient", "type": "UnitTestCase"}]}, {"nodeid": "tests/test_config.py::TestConfig", "outcome": "passed", "result": [{"nodeid": "tests/test_config.py::TestConfig::test_get_chia_root_default", "type": "TestCaseFunction", "lineno": 14}, {"nodeid": "tests/test_config.py::TestConfig::test_get_chia_root_env_var", "type": "TestCaseFunction", "lineno": 8}, {"nodeid": "tests/test_config.py::TestConfig::test_get_letsencrypt_enabled_default", "type": "TestCaseFunction", "lineno": 91}, {"nodeid": "tests/test_config.py::TestConfig::test_get_letsencrypt_enabled_false", "type": "TestCaseFunction", "lineno": 96}, {"nodeid": "tests/test_config.py::TestConfig::test_get_mcp_auth_enabled_default", "type": "TestCaseFunction", "lineno": 81}, {"nodeid": "tests/test_config.py::TestConfig::test_get_mcp_auth_enabled_false", "type": "TestCaseFunction", "lineno": 86}, {"nodeid": "tests/test_config.py::TestConfig::test_get_ssl_paths", "type": "TestCaseFunction", "lineno": 48}, {"nodeid": "tests/test_config.py::TestConfig::test_get_ssl_paths_fallback", "type": "TestCaseFunction", "lineno": 71}, {"nodeid": "tests/test_config.py::TestConfig::test_get_ssl_paths_implicit_root", "type": "TestCaseFunction", "lineno": 60}, {"nodeid": "tests/test_config.py::TestConfig::test_load_chia_config_implicit_root", "type": "TestCaseFunction", "lineno": 37}, {"nodeid": "tests/test_config.py::TestConfig::test_load_chia_config_not_found", "type": "TestCaseFunction", "lineno": 22}, {"nodeid": "tests/test_config.py::TestConfig::test_load_chia_config_success", "type": "TestCaseFunction", "lineno": 29}]}, {"nodeid": "tests/test_config.py", "outcome": "passed", "result": [{"nodeid": "tests/test_config.py::TestConfig", "type": "UnitTestCase"}]}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests", "outcome": "passed", "result": [{"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_deployment_manifest", "type": "TestCaseFunction", "lineno": 15}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_ingress_manifest", "type": "TestCaseFunction", "lineno": 43}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_issuer_manifest", "type": "TestCaseFunction", "lineno": 51}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_secret_manifest", "type": "TestCaseFunction", "lineno": 58}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_service_manifest", "type": "TestCaseFunction", "lineno": 34}]}, {"nodeid": "tests/test_deployment.py", "outcome": "passed", "result": [{"nodeid": "tests/test_deployment.py::TestKubernetesManifests", "type": "UnitTestCase"}]}, {"nodeid": "tests/test_disabled_tools.py::TestDisabledTools", "outcome": "passed", "result": [{"nodeid": "tests/test_disabled_tools.py::TestDisabledTools::test_all_tools_enabled", "type": "TestCaseFunction", "lineno": 49}, {"nodeid": "tests/test_disabled_tools.py::TestDisabledTools::test_disabled_tools_logic", "type": "TestCaseFunction", "lineno": 12}]}, {"nodeid": "tests/test_disabled_tools.py", "outcome": "passed", "result": [{"nodeid": "tests/test_disabled_tools.py::TestDisabledTools", "type": "UnitTestCase"}]}, {"nodeid": "tests/test_k8s_network.py", "outcome": "passed", "result": [{"nodeid": "tests/test_k8s_network.py::test_egress_allow_chia", "type": "Function", "lineno": 64}, {"nodeid": "tests/test_k8s_network.py::test_egress_deny_check", "type": "Function", "lineno": 90}]}, {"nodeid": "tests/test_main.py::TestMain", "outcome": "passed", "result": [{"nodeid": "tests/test_main.py::TestMain::test_auth_token_env", "type": "TestCaseFunction", "lineno": 159}, {"nodeid": "tests/test_main.py::TestMain::test_env_token_verifier", "type": "TestCaseFunction", "lineno": 12}, {"nodeid": "tests/test_main.py::TestMain::test_main_execution", "type": "TestCaseFunction", "lineno": 167}, {"nodeid": "tests/test_main.py::TestMain::test_main_http_prod_config", "type": "TestCaseFunction", "lineno": 143}, {"nodeid": "tests/test_main.py::TestMain::test_main_http_ssl", "type": "TestCaseFunction", "lineno": 127}, {"nodeid": "tests/test_main.py::TestMain::test_main_sse_no_ssl", "type": "TestCaseFunction", "lineno": 111}, {"nodeid": "tests/test_main.py::TestMain::test_main_stdio", "type": "TestCaseFunction", "lineno": 104}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_blockchain_state_failure", "type": "TestCaseFunction", "lineno": 48}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_blockchain_state_success", "type": "TestCaseFunction", "lineno": 28}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_network_info", "type": "TestCaseFunction", "lineno": 62}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_wallet_balance_failure", "type": "TestCaseFunction", "lineno": 90}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_wallet_balance_success", "type": "TestCaseFunction", "lineno": 72}]}, {"nodeid": "tests/test_main.py", "outcome": "passed", "result": [{"nodeid": "tests/test_main.py::TestMain", "type": "UnitTestCase"}]}, {"nodeid": "tests/test_npx_launch.py::TestNpxLaunch", "outcome": "passed", "result": [{"nodeid": "tests/test_npx_launch.py::TestNpxLaunch::test_npx_launch_help", "type": "TestCaseFunction", "lineno": 11}]}, {"nodeid": "tests/test_npx_launch.py", "outcome": "passed", "result": [{"nodeid": "tests/test_npx_launch.py::TestNpxLaunch", "type": "UnitTestCase"}]}, {"nodeid": "tests/test_server.py::TestAuth", "outcome": "passed", "result": [{"nodeid": "tests/test_server.py::TestAuth::test_invalid_token", "type": "TestCaseFunction", "lineno": 20}, {"nodeid": "tests/test_server.py::TestAuth::test_valid_token", "type": "TestCaseFunction", "lineno": 12}]}, {"nodeid": "tests/test_server.py::TestChaiMCP", "outcome": "passed", "result": [{"nodeid": "tests/test_server.py::TestChaiMCP::test_get_blockchain_state", "type": "TestCaseFunction", "lineno": 28}, {"nodeid": "tests/test_server.py::TestChaiMCP::test_get_wallet_balance", "type": "TestCaseFunction", "lineno": 50}]}, {"nodeid": "tests/test_server.py", "outcome": "passed", "result": [{"nodeid": "tests/test_server.py::TestAuth", "type": "UnitTestCase"}, {"nodeid": "tests/test_server.py::TestChaiMCP", "type": "UnitTestCase"}]}, {"nodeid": "tests", "outcome": "passed", "result": [{"nodeid": "tests/test_chia_client.py", "type": "Module"}, {"nodeid": "tests/test_config.py", "type": "Module"}, {"nodeid": "tests/test_deployment.py", "type": "Module"}, {"nodeid": "tests/test_disabled_tools.py", "type": "Module"}, {"nodeid": "tests/test_k8s_network.py", "type": "Module"}, {"nodeid": "tests/test_main.py", "type": "Module"}, {"nodeid": "tests/test_npx_launch.py", "type": "Module"}, {"nodeid": "tests/test_server.py", "type": "Module"}]}], "tests": [{"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_get_connection_error", "lineno": 72, "outcome": "passed", "keywords": ["test_get_connection_error", "__wrapped__", "patchings", "TestChiaRpcClient", "test_chia_client.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00026433297898620367, "outcome": "passed"}, "call": {"duration": 0.0020395410247147083, "outcome": "passed"}, "teardown": {"duration": 7.750000804662704e-05, "outcome": "passed"}}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_get_generic_exception", "lineno": 81, "outcome": "passed", "keywords": ["test_get_generic_exception", "__wrapped__", "patchings", "TestChiaRpcClient", "test_chia_client.py", "tests", "mcpch.ai", ""], "setup": {"duration": 8.504197467118502e-05, "outcome": "passed"}, "call": {"duration": 0.0004389589885249734, "outcome": "passed"}, "teardown": {"duration": 4.854204598814249e-05, "outcome": "passed"}}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_get_success", "lineno": 52, "outcome": "passed", "keywords": ["test_get_success", "__wrapped__", "patchings", "TestChiaRpcClient", "test_chia_client.py", "tests", "mcpch.ai", ""], "setup": {"duration": 7.016700692474842e-05, "outcome": "passed"}, "call": {"duration": 0.0005535420496016741, "outcome": "passed"}, "teardown": {"duration": 4.712503869086504e-05, "outcome": "passed"}}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_init_datalayer", "lineno": 31, "outcome": "passed", "keywords": ["test_init_datalayer", "TestChiaRpcClient", "test_chia_client.py", "tests", "mcpch.ai", ""], "setup": {"duration": 6.250001024454832e-05, "outcome": "passed"}, "call": {"duration": 0.0003767079906538129, "outcome": "passed"}, "teardown": {"duration": 4.416704177856445e-05, "outcome": "passed"}}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_init_defaults", "lineno": 21, "outcome": "passed", "keywords": ["test_init_defaults", "TestChiaRpcClient", "test_chia_client.py", "tests", "mcpch.ai", ""], "setup": {"duration": 6.52919989079237e-05, "outcome": "passed"}, "call": {"duration": 0.00036687497049570084, "outcome": "passed"}, "teardown": {"duration": 4.80839516967535e-05, "outcome": "passed"}}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_init_explicit_port", "lineno": 45, "outcome": "passed", "keywords": ["test_init_explicit_port", "TestChiaRpcClient", "test_chia_client.py", "tests", "mcpch.ai", ""], "setup": {"duration": 6.47080596536398e-05, "outcome": "passed"}, "call": {"duration": 0.00039783294778317213, "outcome": "passed"}, "teardown": {"duration": 4.5291963033378124e-05, "outcome": "passed"}}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_init_unknown_service", "lineno": 38, "outcome": "passed", "keywords": ["test_init_unknown_service", "TestChiaRpcClient", "test_chia_client.py", "tests", "mcpch.ai", ""], "setup": {"duration": 6.237498018890619e-05, "outcome": "passed"}, "call": {"duration": 0.0004267910262569785, "outcome": "passed"}, "teardown": {"duration": 4.4042011722922325e-05, "outcome": "passed"}}, {"nodeid": "tests/test_chia_client.py::TestChiaRpcClient::test_wrappers", "lineno": 90, "outcome": "passed", "keywords": ["test_wrappers", "__wrapped__", "patchings", "TestChiaRpcClient", "test_chia_client.py", "tests", "mcpch.ai", ""], "setup": {"duration": 6.48329732939601e-05, "outcome": "passed"}, "call": {"duration": 0.0004128330620005727, "outcome": "passed"}, "teardown": {"duration": 0.00019558309577405453, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_chia_root_default", "lineno": 14, "outcome": "passed", "keywords": ["test_get_chia_root_default", "__wrapped__", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.0001401669578626752, "outcome": "passed"}, "call": {"duration": 0.00022054195869714022, "outcome": "passed"}, "teardown": {"duration": 3.9792037568986416e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_chia_root_env_var", "lineno": 8, "outcome": "passed", "keywords": ["test_get_chia_root_env_var", "__wrapped__", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.629193037748337e-05, "outcome": "passed"}, "call": {"duration": 0.00016054196748882532, "outcome": "passed"}, "teardown": {"duration": 3.716605715453625e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_letsencrypt_enabled_default", "lineno": 91, "outcome": "passed", "keywords": ["test_get_letsencrypt_enabled_default", "__wrapped__", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.5416952818632126e-05, "outcome": "passed"}, "call": {"duration": 0.00016075000166893005, "outcome": "passed"}, "teardown": {"duration": 3.683299291878939e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_letsencrypt_enabled_false", "lineno": 96, "outcome": "passed", "keywords": ["test_get_letsencrypt_enabled_false", "__wrapped__", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.7333032600581646e-05, "outcome": "passed"}, "call": {"duration": 0.0001568750012665987, "outcome": "passed"}, "teardown": {"duration": 3.750005271285772e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_mcp_auth_enabled_default", "lineno": 81, "outcome": "passed", "keywords": ["test_get_mcp_auth_enabled_default", "__wrapped__", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.512498319149017e-05, "outcome": "passed"}, "call": {"duration": 0.00015158392488956451, "outcome": "passed"}, "teardown": {"duration": 3.74580267816782e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_mcp_auth_enabled_false", "lineno": 86, "outcome": "passed", "keywords": ["test_get_mcp_auth_enabled_false", "__wrapped__", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.6709046475589275e-05, "outcome": "passed"}, "call": {"duration": 0.00014833302702754736, "outcome": "passed"}, "teardown": {"duration": 3.541703335940838e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_ssl_paths", "lineno": 48, "outcome": "passed", "keywords": ["test_get_ssl_paths", "__wrapped__", "patchings", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.4333009757101536e-05, "outcome": "passed"}, "call": {"duration": 0.00029929098673164845, "outcome": "passed"}, "teardown": {"duration": 3.841705620288849e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_ssl_paths_fallback", "lineno": 71, "outcome": "passed", "keywords": ["test_get_ssl_paths_fallback", "__wrapped__", "patchings", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.625002086162567e-05, "outcome": "passed"}, "call": {"duration": 0.00019266700837761164, "outcome": "passed"}, "teardown": {"duration": 3.787502646446228e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_get_ssl_paths_implicit_root", "lineno": 60, "outcome": "passed", "keywords": ["test_get_ssl_paths_implicit_root", "__wrapped__", "patchings", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.695805884897709e-05, "outcome": "passed"}, "call": {"duration": 0.00023341691121459007, "outcome": "passed"}, "teardown": {"duration": 3.629201091825962e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_load_chia_config_implicit_root", "lineno": 37, "outcome": "passed", "keywords": ["test_load_chia_config_implicit_root", "__wrapped__", "patchings", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.5999960750341415e-05, "outcome": "passed"}, "call": {"duration": 0.001213290961459279, "outcome": "passed"}, "teardown": {"duration": 3.687501884996891e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_load_chia_config_not_found", "lineno": 22, "outcome": "passed", "keywords": ["test_load_chia_config_not_found", "__wrapped__", "patchings", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.783303640782833e-05, "outcome": "passed"}, "call": {"duration": 0.00017983291763812304, "outcome": "passed"}, "teardown": {"duration": 3.7917052395641804e-05, "outcome": "passed"}}, {"nodeid": "tests/test_config.py::TestConfig::test_load_chia_config_success", "lineno": 29, "outcome": "passed", "keywords": ["test_load_chia_config_success", "__wrapped__", "patchings", "TestConfig", "test_config.py", "tests", "mcpch.ai", ""], "setup": {"duration": 5.8582983911037445e-05, "outcome": "passed"}, "call": {"duration": 0.001550292014144361, "outcome": "passed"}, "teardown": {"duration": 5.24159986525774e-05, "outcome": "passed"}}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_deployment_manifest", "lineno": 15, "outcome": "passed", "keywords": ["test_deployment_manifest", "TestKubernetesManifests", "test_deployment.py", "tests", "mcpch.ai", ""], "setup": {"duration": 9.120791219174862e-05, "outcome": "passed"}, "call": {"duration": 0.002496041008271277, "outcome": "passed"}, "teardown": {"duration": 8.741696365177631e-05, "outcome": "passed"}}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_ingress_manifest", "lineno": 43, "outcome": "passed", "keywords": ["test_ingress_manifest", "TestKubernetesManifests", "test_deployment.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00012174993753433228, "outcome": "passed"}, "call": {"duration": 0.0015539160231128335, "outcome": "passed"}, "teardown": {"duration": 5.608401261270046e-05, "outcome": "passed"}}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_issuer_manifest", "lineno": 51, "outcome": "passed", "keywords": ["test_issuer_manifest", "TestKubernetesManifests", "test_deployment.py", "tests", "mcpch.ai", ""], "setup": {"duration": 7.079204078763723e-05, "outcome": "passed"}, "call": {"duration": 0.0014031250029802322, "outcome": "passed"}, "teardown": {"duration": 5.412509199231863e-05, "outcome": "passed"}}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_secret_manifest", "lineno": 58, "outcome": "passed", "keywords": ["test_secret_manifest", "TestKubernetesManifests", "test_deployment.py", "tests", "mcpch.ai", ""], "setup": {"duration": 7.499998901039362e-05, "outcome": "passed"}, "call": {"duration": 0.0008211249951273203, "outcome": "passed"}, "teardown": {"duration": 8.650007657706738e-05, "outcome": "passed"}}, {"nodeid": "tests/test_deployment.py::TestKubernetesManifests::test_service_manifest", "lineno": 34, "outcome": "passed", "keywords": ["test_service_manifest", "TestKubernetesManifests", "test_deployment.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00012566696386784315, "outcome": "passed"}, "call": {"duration": 0.0009119999594986439, "outcome": "passed"}, "teardown": {"duration": 8.716597221791744e-05, "outcome": "passed"}}, {"nodeid": "tests/test_disabled_tools.py::TestDisabledTools::test_all_tools_enabled", "lineno": 49, "outcome": "passed", "keywords": ["test_all_tools_enabled", "__wrapped__", "patchings", "TestDisabledTools", "test_disabled_tools.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00013375002890825272, "outcome": "passed"}, "call": {"duration": 0.0023011660668998957, "outcome": "passed"}, "teardown": {"duration": 5.500006955116987e-05, "outcome": "passed"}}, {"nodeid": "tests/test_disabled_tools.py::TestDisabledTools::test_disabled_tools_logic", "lineno": 12, "outcome": "passed", "keywords": ["test_disabled_tools_logic", "__wrapped__", "patchings", "TestDisabledTools", "test_disabled_tools.py", "tests", "mcpch.ai", ""], "setup": {"duration": 7.116701453924179e-05, "outcome": "passed"}, "call": {"duration": 0.0018105839844793081, "outcome": "passed", "stdout": "Disabled tool: get_blockchain_state\nDisabled tool: generate_mnemonic\n"}, "teardown": {"duration": 6.170803681015968e-05, "outcome": "passed"}}, {"nodeid": "tests/test_k8s_network.py::test_egress_allow_chia", "lineno": 64, "outcome": "passed", "keywords": ["test_egress_allow_chia", "test_k8s_network.py", "tests", "mcpch.ai", ""], "setup": {"duration": 1.5832609999924898, "outcome": "passed"}, "call": {"duration": 33.09266316704452, "outcome": "passed"}, "teardown": {"duration": 0.00016979197971522808, "outcome": "passed"}}, {"nodeid": "tests/test_k8s_network.py::test_egress_deny_check", "lineno": 90, "outcome": "passed", "keywords": ["test_egress_deny_check", "test_k8s_network.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.0002434590132907033, "outcome": "passed"}, "call": {"duration": 35.115673499996774, "outcome": "passed"}, "teardown": {"duration": 42.32940258400049, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_auth_token_env", "lineno": 159, "outcome": "failed", "keywords": ["test_auth_token_env", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00033249997068196535, "outcome": "passed"}, "call": {"duration": 0.0005256670992821455, "outcome": "failed", "crash": {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/importlib/__init__.py", "lineno": 109, "message": "ImportError: module chaimcp.main not in sys.modules"}, "traceback": [{"path": "tests/test_main.py", "lineno": 163, "message": ""}, {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/importlib/__init__.py", "lineno": 109, "message": "ImportError"}], "longrepr": "self = <test_main.TestMain testMethod=test_auth_token_env>\n\n    def test_auth_token_env(self):\n        \"\"\"Test global auth settings initialization with env var.\"\"\"\n        with patch.dict(os.environ, {\"MCP_AUTH_TOKEN\": \"test-token\"}):\n>           reload(main_module)\n\ntests/test_main.py:163: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nmodule = <module 'chaimcp.main' from '/Users/dcarrith/Repositories/mcpch.ai/src/chaimcp/main.py'>\n\n    def reload(module):\n        \"\"\"Reload the module and return it.\n    \n        The module must have been successfully imported before.\n    \n        \"\"\"\n        try:\n            name = module.__spec__.name\n        except AttributeError:\n            try:\n                name = module.__name__\n            except AttributeError:\n                raise TypeError(\"reload() argument must be a module\") from None\n    \n        if sys.modules.get(name) is not module:\n>           raise ImportError(f\"module {name} not in sys.modules\", name=name)\nE           ImportError: module chaimcp.main not in sys.modules\n\n/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/importlib/__init__.py:109: ImportError"}, "teardown": {"duration": 0.00013504200614988804, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_env_token_verifier", "lineno": 12, "outcome": "passed", "keywords": ["test_env_token_verifier", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 9.108299855142832e-05, "outcome": "passed"}, "call": {"duration": 0.0008952090283855796, "outcome": "passed"}, "teardown": {"duration": 4.545797128230333e-05, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_main_execution", "lineno": 167, "outcome": "passed", "keywords": ["test_main_execution", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 6.7666987888515e-05, "outcome": "passed"}, "call": {"duration": 0.5093207079917192, "outcome": "passed"}, "teardown": {"duration": 0.00015720794908702374, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_main_http_prod_config", "lineno": 143, "outcome": "failed", "keywords": ["test_main_http_prod_config", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00014991697389632463, "outcome": "passed"}, "call": {"duration": 0.0012760419631376863, "outcome": "failed", "crash": {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py", "lineno": 964, "message": "AssertionError: Expected 'streamable_http_app' to have been called once. Called 0 times."}, "traceback": [{"path": "tests/test_main.py", "lineno": 154, "message": ""}, {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py", "lineno": 964, "message": "AssertionError"}], "stdout": "Starting ChaiMCP server with transport: http\nSSL files not found, running HTTP only.\n", "longrepr": "self = <test_main.TestMain testMethod=test_main_http_prod_config>\nmock_exists = <MagicMock name='exists' id='4456811552'>\nmock_mcp = <MagicMock name='mcp' id='4456820288'>\nmock_uvicorn = <MagicMock name='run' id='4456812560'>\n\n    @patch(\"uvicorn.run\")\n    @patch(\"chaimcp.main.mcp\")\n    @patch.dict(os.environ, {\"MCP_TRANSPORT\": \"http\", \"MCP_PORT\": \"8000\"})\n    @patch(\"os.path.exists\")\n    def test_main_http_prod_config(self, mock_exists, mock_mcp, mock_uvicorn):\n        \"\"\"Test main execution with production config (HTTP, Port 8000, No SSL).\"\"\"\n        mock_exists.return_value = False # Simulate no SSL files\n    \n        main_module.main()\n    \n>       mock_mcp.streamable_http_app.assert_called_once()\n\ntests/test_main.py:154: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MagicMock name='mcp.streamable_http_app' id='4457289040'>\n\n    def assert_called_once(self):\n        \"\"\"assert that the mock was called only once.\n        \"\"\"\n        if not self.call_count == 1:\n            msg = (\"Expected '%s' to have been called once. Called %s times.%s\"\n                   % (self._mock_name or 'mock',\n                      self.call_count,\n                      self._calls_repr()))\n>           raise AssertionError(msg)\nE           AssertionError: Expected 'streamable_http_app' to have been called once. Called 0 times.\n\n/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py:964: AssertionError"}, "teardown": {"duration": 0.00015924999024719, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_main_http_ssl", "lineno": 127, "outcome": "failed", "keywords": ["test_main_http_ssl", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00011608400382101536, "outcome": "passed"}, "call": {"duration": 0.0007511660223826766, "outcome": "failed", "crash": {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py", "lineno": 964, "message": "AssertionError: Expected 'streamable_http_app' to have been called once. Called 0 times."}, "traceback": [{"path": "tests/test_main.py", "lineno": 138, "message": ""}, {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py", "lineno": 964, "message": "AssertionError"}], "stdout": "Starting ChaiMCP server with transport: http\nSSL enabled. Using cert: c\n", "longrepr": "self = <test_main.TestMain testMethod=test_main_http_ssl>\nmock_exists = <MagicMock name='exists' id='4457292736'>\nmock_mcp = <MagicMock name='mcp' id='4457292064'>\nmock_uvicorn = <MagicMock name='run' id='4457291728'>\n\n    @patch(\"uvicorn.run\")\n    @patch(\"chaimcp.main.mcp\")\n    @patch.dict(os.environ, {\"MCP_TRANSPORT\": \"http\", \"SSL_KEY_FILE\": \"k\", \"SSL_CERT_FILE\": \"c\"})\n    @patch(\"os.path.exists\")\n    def test_main_http_ssl(self, mock_exists, mock_mcp, mock_uvicorn):\n        \"\"\"Test main execution with HTTP transport and SSL enabled.\"\"\"\n        mock_exists.return_value = True # SSL files exist\n    \n        main_module.main()\n    \n>       mock_mcp.streamable_http_app.assert_called_once()\n\ntests/test_main.py:138: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MagicMock name='mcp.streamable_http_app' id='4457291056'>\n\n    def assert_called_once(self):\n        \"\"\"assert that the mock was called only once.\n        \"\"\"\n        if not self.call_count == 1:\n            msg = (\"Expected '%s' to have been called once. Called %s times.%s\"\n                   % (self._mock_name or 'mock',\n                      self.call_count,\n                      self._calls_repr()))\n>           raise AssertionError(msg)\nE           AssertionError: Expected 'streamable_http_app' to have been called once. Called 0 times.\n\n/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py:964: AssertionError"}, "teardown": {"duration": 0.00013800000306218863, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_main_sse_no_ssl", "lineno": 111, "outcome": "failed", "keywords": ["test_main_sse_no_ssl", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00010004104115068913, "outcome": "passed"}, "call": {"duration": 0.0008040829561650753, "outcome": "failed", "crash": {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py", "lineno": 964, "message": "AssertionError: Expected 'sse_app' to have been called once. Called 0 times."}, "traceback": [{"path": "tests/test_main.py", "lineno": 122, "message": ""}, {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py", "lineno": 964, "message": "AssertionError"}], "stdout": "Starting ChaiMCP server with transport: sse\nSSL files not found, running HTTP only.\n", "longrepr": "self = <test_main.TestMain testMethod=test_main_sse_no_ssl>\nmock_exists = <MagicMock name='exists' id='4457290720'>\nmock_mcp = <MagicMock name='mcp' id='4457290384'>\nmock_uvicorn = <MagicMock name='run' id='4457290048'>\n\n    @patch(\"uvicorn.run\")\n    @patch(\"chaimcp.main.mcp\")\n    @patch.dict(os.environ, {\"MCP_TRANSPORT\": \"sse\", \"MCP_PORT\": \"8080\"})\n    @patch(\"os.path.exists\")\n    def test_main_sse_no_ssl(self, mock_exists, mock_mcp, mock_uvicorn):\n        \"\"\"Test main execution with SSE transport and no SSL.\"\"\"\n        mock_exists.return_value = False # No SSL files\n    \n        main_module.main()\n    \n>       mock_mcp.sse_app.assert_called_once()\n\ntests/test_main.py:122: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MagicMock name='mcp.sse_app' id='4457287696'>\n\n    def assert_called_once(self):\n        \"\"\"assert that the mock was called only once.\n        \"\"\"\n        if not self.call_count == 1:\n            msg = (\"Expected '%s' to have been called once. Called %s times.%s\"\n                   % (self._mock_name or 'mock',\n                      self.call_count,\n                      self._calls_repr()))\n>           raise AssertionError(msg)\nE           AssertionError: Expected 'sse_app' to have been called once. Called 0 times.\n\n/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/mock.py:964: AssertionError"}, "teardown": {"duration": 9.704194962978363e-05, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_main_stdio", "lineno": 104, "outcome": "failed", "keywords": ["test_main_stdio", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 8.483300916850567e-05, "outcome": "passed"}, "call": {"duration": 0.005001624929718673, "outcome": "failed", "crash": {"path": "/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py", "lineno": 783, "message": "UnsupportedOperation('not readable') [single exception in ExceptionGroup]"}, "stdout": "Starting ChaiMCP server with transport: stdio\n", "longrepr": "+ Exception Group Traceback (most recent call last):\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/tests/test_main.py\", line 109, in test_main_stdio\n  |     main_module.main()\n  |     ~~~~~~~~~~~~~~~~^^\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/src/chaimcp/main.py\", line 308, in main\n  |     mcp.run(transport=transport)\n  |     ~~~~~~~^^^^^^^^^^^^^^^^^^^^^\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/mcp/server/fastmcp/server.py\", line 296, in run\n  |     anyio.run(self.run_stdio_async)\n  |     ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_core/_eventloop.py\", line 77, in run\n  |     return async_backend.run(func, args, {}, backend_options)\n  |            ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2342, in run\n  |     return runner.run(wrapper())\n  |            ~~~~~~~~~~^^^^^^^^^^^\n  |   File \"/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/runners.py\", line 127, in run\n  |     return self._loop.run_until_complete(task)\n  |            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^\n  |   File \"/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/asyncio/base_events.py\", line 719, in run_until_complete\n  |     return future.result()\n  |            ~~~~~~~~~~~~~^^\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2325, in wrapper\n  |     return await func(*args)\n  |            ^^^^^^^^^^^^^^^^^\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/mcp/server/fastmcp/server.py\", line 755, in run_stdio_async\n  |     async with stdio_server() as (read_stream, write_stream):\n  |                ~~~~~~~~~~~~^^\n  |   File \"/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/contextlib.py\", line 221, in __aexit__\n  |     await anext(self.gen)\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/mcp/server/stdio.py\", line 85, in stdio_server\n  |     async with anyio.create_task_group() as tg:\n  |                ~~~~~~~~~~~~~~~~~~~~~~~^^\n  |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 783, in __aexit__\n  |     raise BaseExceptionGroup(\n  |         \"unhandled errors in a TaskGroup\", self._exceptions\n  |     ) from None\n  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)\n  +-+---------------- 1 ----------------\n    | Traceback (most recent call last):\n    |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/mcp/server/stdio.py\", line 63, in stdin_reader\n    |     async for line in stdin:\n    |     ...<7 lines>...\n    |         await read_stream_writer.send(session_message)\n    |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_core/_fileio.py\", line 83, in __aiter__\n    |     line = await self.readline()\n    |            ^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_core/_fileio.py\", line 99, in readline\n    |     return await to_thread.run_sync(self._fp.readline)\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/to_thread.py\", line 63, in run_sync\n    |     return await get_async_backend().run_sync_in_worker_thread(\n    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |         func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter\n    |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n    |     )\n    |     ^\n    |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 2502, in run_sync_in_worker_thread\n    |     return await future\n    |            ^^^^^^^^^^^^\n    |   File \"/Users/dcarrith/Repositories/mcpch.ai/.venv/lib/python3.14/site-packages/anyio/_backends/_asyncio.py\", line 986, in run\n    |     result = context.run(func, *args)\n    | io.UnsupportedOperation: not readable\n    +------------------------------------"}, "teardown": {"duration": 0.00011970801278948784, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_blockchain_state_failure", "lineno": 48, "outcome": "failed", "keywords": ["test_tool_get_blockchain_state_failure", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00011995795648545027, "outcome": "passed"}, "call": {"duration": 0.031238542054779828, "outcome": "failed", "crash": {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/case.py", "lineno": 750, "message": "AssertionError: 'Connection refused to full_node at port 8555. Is it running?' != 'RPC Error'\n- Connection refused to full_node at port 8555. Is it running?\n+ RPC Error"}, "traceback": [{"path": "tests/test_main.py", "lineno": 61, "message": "AssertionError"}], "longrepr": "self = <test_main.TestMain testMethod=test_tool_get_blockchain_state_failure>\nMockClient = <MagicMock name='ChiaRpcClient' id='4457284000'>\n\n    @patch(\"chaimcp.main.ChiaRpcClient\")\n    def test_tool_get_blockchain_state_failure(self, MockClient):\n        \"\"\"Test get_blockchain_state tool failure path.\"\"\"\n        mock_instance = MockClient.return_value\n        mock_instance.get_blockchain_state.return_value = {\n            \"success\": False,\n            \"error\": \"RPC Error\"\n        }\n    \n        result = get_blockchain_state()\n        data = json.loads(result)\n        self.assertFalse(data[\"success\"])\n>       self.assertEqual(data[\"error\"], \"RPC Error\")\nE       AssertionError: 'Connection refused to full_node at port 8555. Is it running?' != 'RPC Error'\nE       - Connection refused to full_node at port 8555. Is it running?\nE       + RPC Error\n\ntests/test_main.py:61: AssertionError"}, "teardown": {"duration": 8.683407213538885e-05, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_blockchain_state_success", "lineno": 28, "outcome": "failed", "keywords": ["test_tool_get_blockchain_state_success", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 9.133305866271257e-05, "outcome": "passed"}, "call": {"duration": 0.013272333075292408, "outcome": "failed", "crash": {"path": "/Users/dcarrith/Repositories/mcpch.ai/tests/test_main.py", "lineno": 46, "message": "KeyError: 'blockchain_state'"}, "traceback": [{"path": "tests/test_main.py", "lineno": 46, "message": "KeyError"}], "longrepr": "self = <test_main.TestMain testMethod=test_tool_get_blockchain_state_success>\nMockClient = <MagicMock name='ChiaRpcClient' id='4457299456'>\n\n    @patch(\"chaimcp.main.ChiaRpcClient\")\n    def test_tool_get_blockchain_state_success(self, MockClient):\n        \"\"\"Test get_blockchain_state tool success path.\"\"\"\n        mock_instance = MockClient.return_value\n        mock_instance.get_blockchain_state.return_value = {\n            \"success\": True,\n            \"blockchain_state\": {\n                \"sync\": {\"sync_mode\": True, \"synced\": True},\n                \"peak\": {\"height\": 100},\n                \"space\": 1000,\n                \"difficulty\": 5\n            }\n        }\n    \n        result = get_blockchain_state()\n        data = json.loads(result)\n        # New implementation returns full blockchain_state object inside the response\n>       self.assertEqual(data[\"blockchain_state\"][\"peak\"][\"height\"], 100)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^\nE       KeyError: 'blockchain_state'\n\ntests/test_main.py:46: KeyError"}, "teardown": {"duration": 6.945792119950056e-05, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_network_info", "lineno": 62, "outcome": "failed", "keywords": ["test_tool_get_network_info", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 8.129095658659935e-05, "outcome": "passed"}, "call": {"duration": 0.013531167060136795, "outcome": "failed", "crash": {"path": "/Users/dcarrith/Repositories/mcpch.ai/tests/test_main.py", "lineno": 71, "message": "KeyError: 'network_name'"}, "traceback": [{"path": "tests/test_main.py", "lineno": 71, "message": "KeyError"}], "longrepr": "self = <test_main.TestMain testMethod=test_tool_get_network_info>\nMockClient = <MagicMock name='ChiaRpcClient' id='4465706048'>\n\n    @patch(\"chaimcp.main.ChiaRpcClient\")\n    def test_tool_get_network_info(self, MockClient):\n        \"\"\"Test get_network_info tool.\"\"\"\n        mock_instance = MockClient.return_value\n        mock_instance.get_network_info.return_value = {\"success\": True, \"network_name\": \"mainnet\"}\n    \n        result = get_network_info()\n        data = json.loads(result)\n>       self.assertEqual(data[\"network_name\"], \"mainnet\")\n                         ^^^^^^^^^^^^^^^^^^^^\nE       KeyError: 'network_name'\n\ntests/test_main.py:71: KeyError"}, "teardown": {"duration": 9.704194962978363e-05, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_wallet_balance_failure", "lineno": 90, "outcome": "failed", "keywords": ["test_tool_get_wallet_balance_failure", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00013179192319512367, "outcome": "passed"}, "call": {"duration": 0.013393625034950674, "outcome": "failed", "crash": {"path": "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/unittest/case.py", "lineno": 750, "message": "AssertionError: 'Connection refused to wallet at port 9256. Is it running?' != 'Wallet locked'\n- Connection refused to wallet at port 9256. Is it running?\n+ Wallet locked"}, "traceback": [{"path": "tests/test_main.py", "lineno": 103, "message": "AssertionError"}], "longrepr": "self = <test_main.TestMain testMethod=test_tool_get_wallet_balance_failure>\nMockClient = <MagicMock name='ChiaRpcClient' id='4465707392'>\n\n    @patch(\"chaimcp.main.ChiaRpcClient\")\n    def test_tool_get_wallet_balance_failure(self, MockClient):\n        \"\"\"Test get_wallet_balance tool failure.\"\"\"\n        mock_instance = MockClient.return_value\n        mock_instance.get_wallet_balance.return_value = {\n            \"success\": False,\n            \"error\": \"Wallet locked\"\n        }\n    \n        result = get_wallet_balance(1)\n        data = json.loads(result)\n        self.assertFalse(data[\"success\"])\n>       self.assertEqual(data[\"error\"], \"Wallet locked\")\nE       AssertionError: 'Connection refused to wallet at port 9256. Is it running?' != 'Wallet locked'\nE       - Connection refused to wallet at port 9256. Is it running?\nE       + Wallet locked\n\ntests/test_main.py:103: AssertionError"}, "teardown": {"duration": 6.829202175140381e-05, "outcome": "passed"}}, {"nodeid": "tests/test_main.py::TestMain::test_tool_get_wallet_balance_success", "lineno": 72, "outcome": "failed", "keywords": ["test_tool_get_wallet_balance_success", "__wrapped__", "patchings", "TestMain", "test_main.py", "tests", "mcpch.ai", ""], "setup": {"duration": 7.062498480081558e-05, "outcome": "passed"}, "call": {"duration": 0.01302212500013411, "outcome": "failed", "crash": {"path": "/Users/dcarrith/Repositories/mcpch.ai/tests/test_main.py", "lineno": 88, "message": "KeyError: 'wallet_balance'"}, "traceback": [{"path": "tests/test_main.py", "lineno": 88, "message": "KeyError"}], "longrepr": "self = <test_main.TestMain testMethod=test_tool_get_wallet_balance_success>\nMockClient = <MagicMock name='ChiaRpcClient' id='4465708736'>\n\n    @patch(\"chaimcp.main.ChiaRpcClient\")\n    def test_tool_get_wallet_balance_success(self, MockClient):\n        \"\"\"Test get_wallet_balance tool success.\"\"\"\n        mock_instance = MockClient.return_value\n        mock_instance.get_wallet_balance.return_value = {\n            \"success\": True,\n            \"wallet_balance\": {\n                \"confirmed_wallet_balance\": 1500000000000, # 1.5 XCH\n                \"spendable_balance\": 1500000000000\n            }\n        }\n    \n        result = get_wallet_balance(1)\n        data = json.loads(result)\n        # New implementation returns full wallet_balance object\n>       self.assertEqual(data[\"wallet_balance\"][\"confirmed_wallet_balance\"], 1500000000000)\n                         ^^^^^^^^^^^^^^^^^^^^^^\nE       KeyError: 'wallet_balance'\n\ntests/test_main.py:88: KeyError"}, "teardown": {"duration": 0.000116499955765903, "outcome": "passed"}}, {"nodeid": "tests/test_npx_launch.py::TestNpxLaunch::test_npx_launch_help", "lineno": 11, "outcome": "passed", "keywords": ["test_npx_launch_help", "TestNpxLaunch", "test_npx_launch.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.0002001250395551324, "outcome": "passed"}, "call": {"duration": 0.42462795798201114, "outcome": "passed"}, "teardown": {"duration": 0.00023504102136939764, "outcome": "passed"}}, {"nodeid": "tests/test_server.py::TestAuth::test_invalid_token", "lineno": 20, "outcome": "passed", "keywords": ["test_invalid_token", "TestAuth", "test_server.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.0002887910231947899, "outcome": "passed"}, "call": {"duration": 0.0037013329565525055, "outcome": "passed"}, "teardown": {"duration": 8.954200893640518e-05, "outcome": "passed"}}, {"nodeid": "tests/test_server.py::TestAuth::test_valid_token", "lineno": 12, "outcome": "passed", "keywords": ["test_valid_token", "TestAuth", "test_server.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00012637500185519457, "outcome": "passed"}, "call": {"duration": 0.001049665967002511, "outcome": "passed"}, "teardown": {"duration": 7.637508679181337e-05, "outcome": "passed"}}, {"nodeid": "tests/test_server.py::TestChaiMCP::test_get_blockchain_state", "lineno": 28, "outcome": "failed", "keywords": ["test_get_blockchain_state", "__wrapped__", "patchings", "TestChaiMCP", "test_server.py", "tests", "mcpch.ai", ""], "setup": {"duration": 0.00011974992230534554, "outcome": "passed"}, "call": {"duration": 0.014252749970182776, "outcome": "failed", "crash": {"path": "/Users/dcarrith/Repositories/mcpch.ai/tests/test_server.py", "lineno": 48, "message": "KeyError: 'synced'"}, "traceback": [{"path": "tests/test_server.py", "lineno": 48, "message": "KeyError"}], "longrepr": "self = <test_server.TestChaiMCP testMethod=test_get_blockchain_state>\nMockClient = <MagicMock name='ChiaRpcClient' id='4465710080'>\n\n    @patch(\"chaimcp.main.ChiaRpcClient\")\n    def test_get_blockchain_state(self, MockClient):\n        \"\"\"Test get_blockchain_state tool.\"\"\"\n        # Setup mock\n        mock_instance = MockClient.return_value\n        mock_instance.get_blockchain_state.return_value = {\n            \"success\": True,\n            \"blockchain_state\": {\n                \"sync\": {\"sync_mode\": False, \"synced\": True},\n                \"peak\": {\"height\": 12345},\n                \"difficulty\": 100\n            }\n        }\n    \n        # Run tool\n        result = get_blockchain_state()\n        data = json.loads(result)\n    \n        # Verify\n>       self.assertTrue(data[\"synced\"])\n                        ^^^^^^^^^^^^^^\nE       KeyError: 'synced'\n\ntests/test_server.py:48: KeyError"}, "teardown": {"duration": 7.149996235966682e-05, "outcome": "passed"}}, {"nodeid": "tests/test_server.py::TestChaiMCP::test_get_wallet_balance", "lineno": 50, "outcome": "failed", "keywords": ["test_get_wallet_balance", "__wrapped__", "patchings", "TestChaiMCP", "test_server.py", "tests", "mcpch.ai", ""], "setup": {"duration": 8.483394049108028e-05, "outcome": "passed"}, "call": {"duration": 0.013179458095692098, "outcome": "failed", "crash": {"path": "/Users/dcarrith/Repositories/mcpch.ai/tests/test_server.py", "lineno": 69, "message": "KeyError: 'confirmed_balance_xch'"}, "traceback": [{"path": "tests/test_server.py", "lineno": 69, "message": "KeyError"}], "longrepr": "self = <test_server.TestChaiMCP testMethod=test_get_wallet_balance>\nMockClient = <MagicMock name='ChiaRpcClient' id='4465711424'>\n\n    @patch(\"chaimcp.main.ChiaRpcClient\")\n    def test_get_wallet_balance(self, MockClient):\n        \"\"\"Test get_wallet_balance tool.\"\"\"\n        # Setup mock\n        mock_instance = MockClient.return_value\n        mock_instance.get_wallet_balance.return_value = {\n            \"success\": True,\n            \"wallet_balance\": {\n                \"confirmed_wallet_balance\": 1500000000000, # 1.5 XCH\n                \"spendable_balance\": 1500000000000\n            }\n        }\n    \n        # Run tool\n        result = get_wallet_balance(1)\n        data = json.loads(result)\n    \n        # Verify\n>       self.assertEqual(data[\"confirmed_balance_xch\"], 1.5)\n                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE       KeyError: 'confirmed_balance_xch'\n\ntests/test_server.py:69: KeyError"}, "teardown": {"duration": 9.67090018093586e-05, "outcome": "passed"}}]}